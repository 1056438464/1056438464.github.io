<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<title>shang wj</title>


<link rel="stylesheet" href="/styles/main.css">


    <meta name="generator" content="Hexo 7.3.0"></head>
    <body>
        <div class="container">
            <header>
<div class="main">
<div class="title">
    <a href="#" class="logo">shang wj</a>
</div>
<div class="site-nav">
    <ul id="menu" class="menu">
    
        <li class="menu-item text-underline">
            <a href="/">Home</a>
        </li>
    
        <li class="menu-item text-underline">
            <a href="/archives">Archives</a>
        </li>
    
        <li class="menu-item text-underline">
            <a href="/about/">About</a>
        </li>
            
    </ul>
</div>
</div>
</header>
            <main class="main">
                <section class="posts clearfix">
    <div class="posts-wrapper">
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/26/232/">AOP中的切入点表达式</a>
            </div>
            <p class="sub">Aug 26 2018</p>
            <div class="post-content">
                
                    <h3 id="切入点表达式："><a href="#切入点表达式：" class="headerlink" title="切入点表达式："></a>切入点表达式：</h3><h3 id="切入点表达式：-1"><a href="#切入点表达式：-1" class="headerlink" title="切入点表达式："></a>切入点表达式：</h3><p><strong>拦截指定的类，生成代理对象！（目标对象）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//? 代表可是不写</span><br><span class="line"></span><br><span class="line">execution(</span><br><span class="line">modifiers-pattern?   				拦截的方法的访问修饰符</span><br><span class="line">ret-type-pattern                   方法返回类型，必须指定</span><br><span class="line">declaring-type-pattern?             拦截的方法所在的类</span><br><span class="line"> name-pattern(param-pattern)       拦截的方法（以及方法的参数列表）</span><br><span class="line">     throws-pattern?)                  方法声明的异常</span><br></pre></td></tr></table></figure>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><pre><code>拦截，一定要指定到方法！
</code></pre>
<p><strong>代码示例</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 开启注解扫描 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.itcast.g_execution&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- dao实例加入容器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.itcast.g_execution.UserDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 实例化切面类 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;aop&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.itcast.g_execution.TransactionAop&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- Aop相关配置 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 切入点表达式定义 --&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 1. 拦截指定的方法(通用)  --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn.itcast.g_execution.UserDao.save(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 2. 拦截指定的类下所有的方法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn.itcast.g_execution.UserDao.*(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 3. 拦截指定包下所有的类的所有方法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn.itcast.g_execution.*.*(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 3. 拦截指定包，以及其子包下所有类的所有方法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn..*.*(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 5. 拦截所有的public方法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(public * *(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 6. 拦截所有的包含save方法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* *save*(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 7. 拦截UserDao.save()方法与OrderDao.save() --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn..UserDao.save(..)) || execution(* cn..OrderDao.save(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn..UserDao.save(..)) or execution(* cn..OrderDao.save(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 8. 不拦截UserDao.save()方法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;!execution(* cn..UserDao.save(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot; not execution(* cn..UserDao.save(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 9. 拦截UserDao.save()同时拦截OrderDao.save() --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 注意： 这种很少用，一般都是或者的关系即: || 、 or  --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;aop:pointcut expression=&quot;execution(* cn..UserDao.save(..)) and execution(* cn..OrderDao.save(..))&quot; id=&quot;pt&quot;/&gt;--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn..UserDao.save(..)) <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> execution(* cn..OrderDao.save(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 切面配置 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;aop&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;arroud&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span>      </span><br></pre></td></tr></table></figure>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/26/225/">实现AOP——注解和XML配置</a>
            </div>
            <p class="sub">Aug 26 2018</p>
            <div class="post-content">
                
                    <h3 id="Spring生成代理对象的过程"><a href="#Spring生成代理对象的过程" class="headerlink" title="Spring生成代理对象的过程"></a>Spring生成代理对象的过程</h3><pre><code>    1. 创建容器对象的时候， 根据“切入点表达式”拦截的类，生成代理对象；
    2. 如果目标对象有实现接口，使用jdk代理！
    3. 如果目标对象没有实现接口，使用cglib代理！
    4. 从容器获取代理后的对象
    5. 执行代理对象的方法，在运行时期，动态织入“切面”类中的“通知”!
</code></pre>
<h3 id="1-注解行式"><a href="#1-注解行式" class="headerlink" title="1.注解行式"></a>1.注解行式</h3><h4 id="1-1引入aop名称空间-开启aop注解"><a href="#1-1引入aop名称空间-开启aop注解" class="headerlink" title="1.1引入aop名称空间,开启aop注解"></a>1.1引入aop名称空间,开启aop注解</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 开启注解扫描 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.itcast.e_aop_anno&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 开启aop注解 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-2-使用Aop相关注解"><a href="#1-2-使用Aop相关注解" class="headerlink" title="1.2 使用Aop相关注解"></a>1.2 使用Aop相关注解</h4><p><code>@Aspect </code>     指定一个类为切面类（切面类也需要实例化）（切面类中的方法，也叫做通知）<br><code>@Before	</code>       前置通知  【在执行目标对象方法之前执行】<br><code>@After</code>			   后置通知  【在执行目标对象方法之后执行】<br><code>@AfterReturning</code>    返回后通知  【在执行目标对象方法结束后执行， 出现异常不执行】<br><code>@AfterThrowing </code>   异常通知   【在执行目标对象方法出现异常时候执行】<br><code>@Around</code>          环绕通知   【环绕目标方法执行】<br><code>@Pointcut</code>      定义一个切入点表达式变量  （后面使用这个切入点表达式的时候，直接引用方法名即可）</p>
<p><strong>代码示例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口对象IUserDao</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//目标对象UserDao</span></span><br><span class="line"><span class="meta">@Repository</span>			<span class="comment">// 把对象加入ioc容器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> <span class="keyword">implements</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;保存...&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//切面类TransactionAop</span></span><br><span class="line"><span class="meta">@Component(&quot;aop&quot;)</span></span><br><span class="line"><span class="meta">@Aspect</span>      <span class="comment">// 指定一个类为切面类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransactionAop</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 定义一个切入点表达式变量  （后面使用这个切入点表达式的时候，直接引用方法名即可）</span></span><br><span class="line">	<span class="meta">@Pointcut(&quot;execution(* cn.itcast.e_aop_anno.UserDao.*(..))&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointcut_</span><span class="params">()</span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//【前置通知】</span></span><br><span class="line">	<span class="comment">// 在执行业务方法，之前执行</span></span><br><span class="line">	<span class="meta">@Before(&quot;pointcut_()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beginTransaction</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;[前置通知]  开启事务..&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//【后置通知】</span></span><br><span class="line">	<span class="comment">// 在执行业务方法，之后执行</span></span><br><span class="line">	<span class="meta">@After(&quot;pointcut_()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;[后置通知] 提交事务..&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 【返回后通知】   在执行目标方法结束后执行, 出现异常不会执行</span></span><br><span class="line">	<span class="meta">@AfterReturning(&quot;pointcut_()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturing</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;[返回后通知]&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 【异常通知】   在执行目标方法的时候出现异常执行</span></span><br><span class="line">	<span class="meta">@AfterThrowing(&quot;pointcut_()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;[异常通知]&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 【环绕通知】 会环绕目标方法执行</span></span><br><span class="line">	<span class="meta">@Around(&quot;pointcut_()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">arroud</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;[环绕前：]&quot;</span>);</span><br><span class="line">		pjp.proceed();    			   <span class="comment">// 执行目标方法</span></span><br><span class="line">		System.out.println(<span class="string">&quot;[环绕后：]&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">private</span> <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>,getClass());</span><br><span class="line">	</span><br><span class="line">	 <span class="comment">// jdk代理</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testApp</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		<span class="comment">// springIOC容器中获取对象，用接口接收！</span></span><br><span class="line"><span class="comment">//		IUserDao userDao = (IUserDao) ac.getBean(&quot;userDao&quot;);</span></span><br><span class="line"><span class="comment">//		System.out.println(userDao.getClass());</span></span><br><span class="line"><span class="comment">//		userDao.save();</span></span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// springIOC容器中获取对象，用实现接收？   报错！！！！！！！！！</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 *  java.lang.ClassCastException: </span></span><br><span class="line"><span class="comment">		 *      $Proxy13 cannot be cast to cn.itcast.e_aop_anno.UserDao</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">// 总结：在spring的aop编程中，符合切入点表达式的目标类，  如果目标对象有实现接口，从容器获取对象的时候，一定要通过接口接收！</span></span><br><span class="line">		<span class="comment">// 否则，包类型转换错误！</span></span><br><span class="line">		<span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) ac.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">		System.out.println(userDao.getClass());</span><br><span class="line">		userDao.save();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// cglib代理</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testApp_cglib</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		<span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) ac.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">		System.out.println(userDao.getClass());</span><br><span class="line">		userDao.save();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 没有生成代理对象，因为没有被切入点表达式拦截</span></span><br><span class="line">	<span class="comment">// execution(* cn.itcast.e_aop_anno.UserDao.*(..))</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testApp_save_order</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		<span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> (OrderDao) ac.getBean(<span class="string">&quot;orderDao&quot;</span>);</span><br><span class="line">		System.out.println(orderDao.getClass());</span><br><span class="line">		orderDao.save();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-XML配置"><a href="#2-XML配置" class="headerlink" title="2.XML配置"></a>2.XML配置</h3><p><strong>代码示例</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- dao实例加入容器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.itcast.f_aop_xml.UserDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 实例化切面类 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;aop&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.itcast.f_aop_xml.TransactionAop&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- Aop相关配置 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 切入点表达式定义 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn.itcast.f_aop_xml.UserDao.*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 切面配置 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;aop&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">			<span class="comment">&lt;!-- 【环绕通知】 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;arroud&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">			<span class="comment">&lt;!-- 【前置通知】 在目标方法之前执行 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beginTransaction&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span> /&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 【后置通知】 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;commit&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 【返回后通知】 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturing&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 异常通知 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;afterThrowing&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span>      </span><br><span class="line"></span><br></pre></td></tr></table></figure>


                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/26/223/">Spring框架——AOP</a>
            </div>
            <p class="sub">Aug 26 2018</p>
            <div class="post-content">
                
                    <h3 id="1-什么是AOP编程"><a href="#1-什么是AOP编程" class="headerlink" title="1.什么是AOP编程"></a>1.什么是AOP编程</h3><p>主要是分离业务代码与关注点代码<br>aop( aspect oriented programming ) 面向切面(方面)编程,是对所有对象或者是一类对象编程,核心是( 在不增加代码的基础上， 还增加新功能 )<br>也可以理解是面向<strong>同一种类型</strong>bean进行编程，或者是面向<strong>N多对象</strong>进行编程。</p>
<h4 id="1-1-概念："><a href="#1-1-概念：" class="headerlink" title="1.1 概念："></a>1.1 概念：</h4><pre><code>Aop编程：
    关注点代码与业务代码分离！(jdk/cglib代理)
关注点：
    重复执行的代码, 也叫关注点代码!
切面：
    关注点代码形成的类，就叫做切面（事务，权限控制, 日志）
切入点表达式
    拦截方法，给方法所在的类，生成代理对象！
    Spring在初始化容器的时候，会根据切入点表达式的规则，会符合拦截规则的方法所在的类生成代理对象！
</code></pre>
<h3 id="2-实现AOP编程——代理"><a href="#2-实现AOP编程——代理" class="headerlink" title="2.实现AOP编程——代理"></a>2.实现AOP编程——代理</h3><p><strong>概念：</strong><br>Proxy, 表示代理！ 提供了对目标对象另外的访问方式，即通过代理访问目标对象</p>
<p><strong>Java中代理：</strong></p>
<ol>
<li>静态代理</li>
<li>动态代理–Jdk 代理</li>
<li>Cglib 代理</li>
</ol>
<h4 id="2-1-静态代理"><a href="#2-1-静态代理" class="headerlink" title="2.1 静态代理"></a>2.1 静态代理</h4><p><strong>特点：</strong></p>
<ol>
<li><strong>目标对象</strong>必须要实现接口</li>
<li>代理对象，要<strong>实现与目标对象一样的接口</strong></li>
</ol>
<p><strong>缺点：</strong></p>
<ol>
<li>代理对象，需要依赖目标对象的接口！如果接口功能变化，目标对象变化，会引入代理对象的变化!</li>
<li>对每一个目标对象，都要分别写一个代理类，麻烦！(代理工厂)</li>
</ol>
<p><strong>代码示例:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IUserDao接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标对象UserDao</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> <span class="keyword">implements</span> <span class="title class_">IUserDao</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;模拟： 保存用户！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;查询&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *代理对象UserDaoProxy</span></span><br><span class="line"><span class="comment"> * 静态代理</span></span><br><span class="line"><span class="comment">          特点：</span></span><br><span class="line"><span class="comment">	1. 目标对象必须要实现接口</span></span><br><span class="line"><span class="comment">	2. 代理对象，要实现与目标对象一样的接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">IUserDao</span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 代理对象，需要维护一个目标对象</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">IUserDao</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;代理操作： 开启事务...&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		target.save();   <span class="comment">// 执行目标对象的方法</span></span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;代理操作：提交事务...&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span> &#123;</span><br><span class="line">		target.find();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">// 代理对象</span></span><br><span class="line">		<span class="type">IUserDao</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>();</span><br><span class="line">		<span class="comment">// 执行代理方法</span></span><br><span class="line">		proxy.save();</span><br><span class="line">		 </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-2-动态代理"><a href="#2-2-动态代理" class="headerlink" title="2.2 动态代理"></a>2.2 动态代理</h4><p><strong>动态代理：</strong></p>
<ol>
<li>通常说的动态代理，就是指jdk代理!因为是通过jdk的api在运行时期，动态的生成代理对象的！</li>
<li><strong>目标对象一定要实现接口, 代理对象不用实现接口!</strong></li>
</ol>
<p><strong>JDK 生成代理对象的Api</strong><br><img src="https://www.swj233.top/usr/uploads/2018/08/2106354247.png"><br><strong>参数loader :</strong><br>当前目标对象使用的类加载器！<br><strong>参数interfaces :  **<br>当前目标对象实现的接口<br><strong>参数 h: **<br>    接口类型，事件处理器.<br>    当执行目标对象方法的时候，会触发事件； 把当前执行的方法(method对象)，传入事件处理器方法参数中,  这样就可以根据业务逻辑，判断是否执行目标对象方法或扩展功能！<br>InvocationHandler对象会直接调用自己的invoke方法，invoke方法将</strong>目标对象传入</strong>调用目标对象方法<code>（method.invoke(target, args)）</code>，而在本例中UserDao就是<strong>目标对象</strong>，而UserDao.save是目标方法method<br><img src="https://www.swj233.top/usr/uploads/2018/08/1414442860.png"></p>
<p><strong>代码示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// IUserDao接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标对象UserDao</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> <span class="keyword">implements</span> <span class="title class_">IUserDao</span>&#123;</span><br><span class="line"><span class="comment">//method</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;模拟： 保存用户！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;查询&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代理对象</span></span><br><span class="line"><span class="comment"> * 动态代理：</span></span><br><span class="line"><span class="comment"> *    代理工厂，给多个目标对象生成代理对象！</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> AdminTH</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收一个目标对象</span></span><br><span class="line">	<span class="keyword">private</span> Object target;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 返回对目标对象(target)代理后的对象(proxy)</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">getProxyInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">Object</span> <span class="variable">proxy</span> <span class="operator">=</span> Proxy.newProxyInstance(</span><br><span class="line">				target.getClass().getClassLoader(),  <span class="comment">// 目标对象使用的类加载器</span></span><br><span class="line">				target.getClass().getInterfaces(),   <span class="comment">// 目标对象实现的所有接口</span></span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;			<span class="comment">// 执行代理对象方法时候触发</span></span><br><span class="line">					<span class="meta">@Override</span></span><br><span class="line">					<span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span><br><span class="line">							<span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">						</span><br><span class="line">						<span class="comment">// 获取当前执行的方法的方法名</span></span><br><span class="line">						<span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> method.getName();</span><br><span class="line">						<span class="comment">// 方法返回值</span></span><br><span class="line">						<span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">						</span><br><span class="line">						<span class="comment">// 判断</span></span><br><span class="line">						<span class="keyword">if</span> (<span class="string">&quot;find&quot;</span>.equals(methodName)) &#123;</span><br><span class="line">							<span class="comment">// 直接调用目标对象方法</span></span><br><span class="line">							result = method.invoke(target, args);</span><br><span class="line">						&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">							System.out.println(<span class="string">&quot;开启事务...&quot;</span>);</span><br><span class="line">							<span class="comment">// 执行目标对象方法</span></span><br><span class="line">							result = method.invoke(target, args);</span><br><span class="line">							System.out.println(<span class="string">&quot;提交事务...&quot;</span>);</span><br><span class="line">							</span><br><span class="line">						&#125;</span><br><span class="line">						</span><br><span class="line">						</span><br><span class="line">						<span class="keyword">return</span> result;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">		);</span><br><span class="line">		<span class="keyword">return</span> proxy;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 创建目标对象</span></span><br><span class="line">		<span class="type">IUserDao</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">		System.out.println(<span class="string">&quot;目标对象：&quot;</span> + target.getClass());  <span class="comment">// class cn.itcast.b_dynamic.UserDao</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 代理对象</span></span><br><span class="line">		<span class="type">IUserDao</span> <span class="variable">proxy</span> <span class="operator">=</span> (IUserDao) <span class="keyword">new</span> <span class="title class_">ProxyFactory</span>(target).getProxyInstance();</span><br><span class="line">		System.out.println(<span class="string">&quot;代理对象： &quot;</span> + proxy.getClass());  <span class="comment">//  class $Proxy0</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 执行代理对象的方法</span></span><br><span class="line">		proxy.save();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-CGLIB-代理"><a href="#2-3-CGLIB-代理" class="headerlink" title="2.3 CGLIB 代理"></a>2.3 CGLIB 代理</h4><p><strong>概念：</strong><br>也叫”子类代理”<br>当目标对象没有实现接口，就不能使用jdk提供的代理，可以以子类的方式实现！<br>在运行时期动态在内存中构建一个子类对象的方法，从而对目标对象扩展，这种就是cglib代理！<br>Spring也支持cglib代理，核心包中已经包含此功能！</p>
<ul>
<li>JDK的动态代理有一个限制，就是使用动态代理的对象必须实现一个或多个接口。如果想代理没有实现接口的类，就可以使用CGLIB实现。</li>
<li>CGLIB是一个强大的高性能的代码生成包，它可以在运行期扩展Java类与实现Java接口。它广泛的被许多AOP的框架使用，例如Spring AOP和dynaop，为他们提供方法的interception（拦截）。 </li>
<li>CGLIB包的底层是通过使用一个小而快的字节码处理框架ASM，来转换字节码并生成新的类。不鼓励直接使用ASM，因为它要求你必须对JVM内部结构包括class文件的格式和指令集都很熟悉</li>
</ul>
<p><strong>特点：</strong></p>
<ol>
<li>目标对象可以不实现接口</li>
<li>目标类不能为final， 如果为final报错</li>
<li>方法如果为final&#x2F;static, 不会被代理拦截！ 会直接执行目标对象方法 ！</li>
</ol>
<p><strong>核心代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * cglib代理：</span></span><br><span class="line"><span class="comment"> *    代理工厂，给多个目标对象生成代理对象！</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> AdminTH</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收一个目标对象</span></span><br><span class="line">	<span class="keyword">private</span> Object target;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 返回目标对象代理后的子类对象</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">getProxyInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// 对target生成子类对象</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 字节码生成工具类</span></span><br><span class="line">		<span class="type">Enhancer</span> <span class="variable">en</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">		<span class="comment">// 设置父类</span></span><br><span class="line">		en.setSuperclass(target.getClass());</span><br><span class="line">		<span class="comment">// 设置回调函数</span></span><br><span class="line">		en.setCallback(<span class="built_in">this</span>);</span><br><span class="line">		<span class="comment">// 创建子类对象</span></span><br><span class="line">		<span class="keyword">return</span> en.create();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 事件处理器，执行目标方法时候触发</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object obj, Method method, Object[] args,</span></span><br><span class="line"><span class="params">			MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;开启事务...&quot;</span>);</span><br><span class="line">		<span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">		System.out.println(<span class="string">&quot;提交事务...&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用对象类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 创建目标对象</span></span><br><span class="line">		<span class="type">UserDao</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">		System.out.println(<span class="string">&quot;目标对象：&quot;</span> + target.getClass());  <span class="comment">// class cn.itcast.c_cglib.UserDao</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 代理对象</span></span><br><span class="line">		<span class="type">UserDao</span> <span class="variable">proxy</span> <span class="operator">=</span> (UserDao) <span class="keyword">new</span> <span class="title class_">ProxyFactory</span>(target).getProxyInstance();</span><br><span class="line">		System.out.println(<span class="string">&quot;代理对象： &quot;</span> + proxy.getClass());  <span class="comment">//  class cn.itcast.c_cglib.UserDao$$EnhancerByCGLIB$$6ecf51fe</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 执行代理对象的方法</span></span><br><span class="line">		proxy.save();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/25/220/">Spring框架——IOC</a>
            </div>
            <p class="sub">Aug 25 2018</p>
            <div class="post-content">
                
                    <h3 id="1-IOC是什么？"><a href="#1-IOC是什么？" class="headerlink" title="1.IOC是什么？"></a>1.IOC是什么？</h3><p>ioc(inverse of controll ) 控制反转。<br>所谓控制反转就是把**创建对象(bean)和维护对象(bean)**的关系的权利从程序中转移到spring的容器(applicationContext.xml),而程序本身不再维护。<br>DI是什么?<br>di(dependency injection) 依赖注入: 实际上di和ioc是同一个概念，spring设计者认为di更准确表示spring核心技术</p>
<h3 id="2-IOC如何获取bean"><a href="#2-IOC如何获取bean" class="headerlink" title="2.IOC如何获取bean"></a>2.IOC如何获取bean</h3><h4 id="从ApplicationContex-应用上下文容器中获取bean和从bean工厂容器中获取bean"><a href="#从ApplicationContex-应用上下文容器中获取bean和从bean工厂容器中获取bean" class="headerlink" title="	从ApplicationContex 应用上下文容器中获取bean和从bean工厂容器中获取bean"></a>	从ApplicationContex 应用上下文容器中获取bean和从bean工厂容器中获取bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//从ApplicationContext中取bean</span><br><span class="line">ApplicationContext ac=new ClassPathXmlApplicationContext(&quot;com/hsp/ioc/beans.xml&quot;);</span><br><span class="line">//当我们去实例化beans.xml,该文件中配置的bean被实例(该bean scope是 singleton)从bean中取出student</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		//如果我们使用beanfactory去获取bean，当你只是实例化该容器， 那么</span><br><span class="line">		//容器的bean不被实例化,只有当你去使用getBean某个bean时，才会实时的创建.</span><br><span class="line">		</span><br><span class="line">		BeanFactory factory = new XmlBeanFactory(</span><br><span class="line">				new ClassPathResource(&quot;com/hsp/ioc/beans.xml&quot;));</span><br><span class="line">		factory.getBean(&quot;student&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>两者的区别：</strong><br>1.如果使用<strong>ApplicationContext</strong> ，则配置的bean如果是 singlton不管你用不用，都被实例化.(好处就是可以预先加载,缺点就是耗内存)<br>2.如果是 <strong>BeanFactory</strong> ,则当你获取beanfacotry时候，配置的bean不会被马上实例化，当你使用的时候，才被实例(好处节约内存,缺点就是速度)</p>
<h3 id="3-IOC处理对象的依赖关系"><a href="#3-IOC处理对象的依赖关系" class="headerlink" title="3.IOC处理对象的依赖关系"></a>3.IOC处理对象的依赖关系</h3><p><strong>set注入的缺点是无法清晰表达哪些属性是必须的，哪些是可选的，构造注入的优势是通过构造强制依赖关系，不可能实例化不完全的或无法使用的bean。</strong></p>
<h4 id="3-1-set方法注入值"><a href="#3-1-set方法注入值" class="headerlink" title="3.1 set方法注入值"></a>3.1 set方法注入值</h4><ul>
<li>普通字段赋值</li>
<li>集合属性 (list&#x2F;map&#x2F;property)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Department类:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String [] empName;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Employee&gt; empList;</span><br><span class="line">	<span class="keyword">private</span> Set&lt;Employee&gt; empsets;</span><br><span class="line">	<span class="keyword">private</span> Map&lt;String,Employee&gt; empMaps;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> Set&lt;Employee&gt; <span class="title function_">getEmpsets</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> empsets;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmpsets</span><span class="params">(Set&lt;Employee&gt; empsets)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.empsets = empsets;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String[] getEmpName() &#123;</span><br><span class="line">		<span class="keyword">return</span> empName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmpName</span><span class="params">(String[] empName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.empName = empName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpList</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> empList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmpList</span><span class="params">(List&lt;Employee&gt; empList)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.empList = empList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> Map&lt;String, Employee&gt; <span class="title function_">getEmpMaps</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> empMaps;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmpMaps</span><span class="params">(Map&lt;String, Employee&gt; empMaps)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.empMaps = empMaps;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Employeel类 </span></span><br><span class="line"><span class="keyword">package</span> com.hsp.collection;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;department&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.collection.Department&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;财务部&quot;</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 给数组注入值 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;empName&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>小明小明<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>小明小明小明小明<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 给list注入值 list 中可以有相当的对象 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;empList&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;emp2&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;emp1&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;emp1&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 给set注入值 set不能有相同的对象 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;empsets&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;emp1&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;emp2&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;emp2&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 给map注入值 map只有key不一样，就可以装配value --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;empMaps&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;11&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;emp1&quot;</span> /&gt;</span> </span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;22&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;emp2&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;33&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;emp1&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 给属性集合配置 --&gt;</span>【点http协议 referer 】</span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pp&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;pp1&quot;</span>&gt;</span>abcd<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;pp2&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.collection.Employee&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;北京&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.collection.Employee&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;天津&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--内部bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">”foo”</span> <span class="attr">class</span>=<span class="string">”....Foo”</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”属性”</span>&gt;</span></span><br><span class="line">	&lt;!—第一方法引用--&gt;</span><br><span class="line">	<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">’bean对象名’/</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String age;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(String age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Gradate</span> <span class="keyword">extends</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">	....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">在beans.xml文件中体现配置 </span><br><span class="line"><span class="comment">&lt;!-- 配置一个学生对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.inherit.Student&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;顺平&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置Grdate对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;grdate&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.inherit.Gradate&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 如果自己配置属性name,age,则会替换从父对象继承的数据  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;小明&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;degree&quot;</span> <span class="attr">value</span>=<span class="string">&quot;学士&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-构造函数赋值"><a href="#3-2-构造函数赋值" class="headerlink" title="3.2 构造函数赋值"></a>3.2 构造函数赋值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">//默认构造函数</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">()</span>&#123;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;Employee(String name, int age) 函数被调用..&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index:第几个参数<br>type：参数类型<br>value:参数<br><strong>spring会根据传入的参数，自动调用相应的狗崽函数</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置一个雇员对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;employee&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.constructor.Employee&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 通过构造函数来注入属性值 --&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;大明&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-3自动装配bean的属性值-autowire-”…-”"><a href="#3-3自动装配bean的属性值-autowire-”…-”" class="headerlink" title="3.3自动装配bean的属性值(autowire&#x3D;”….”)"></a>3.3自动装配bean的属性值(autowire&#x3D;”….”)</h4><p><strong>Spring官方文档说明</strong><br><img src="https://www.swj233.top/usr/uploads/2018/08/1642963009.png"><br><strong>原理</strong><br><img src="https://www.swj233.top/usr/uploads/2018/08/2360614417.png"></p>
<p><strong>(1) byName: byName:寻找和属性名相同的bean,找不到,装不上</strong><br>    <em>（如下面的例子:当master和dog对象加载到内存中时，master中的dog其实是个null。当在获取bean的时候master.getDog().getName		()，ioc会根据你设置autowire&#x3D;“byName” ，来从内存中查找对象名&#x3D;dog的，然后把dog对象的内存地址给master的dog属性）</em><br><strong>(2)	byType: byType:寻找和属性类型相同的bean,找不到,装不上,找到多个抛异常。</strong><br>    <em>（同byName原理一样，只是要查找类型是dog类型的对象，名字可以不相同，但是类型相同就行）</em><br><strong>(3)	constructor: autowire&#x3D;”constructor”</strong><br>说明 ： 查找和bean的构造参数一致的一个或多个bean，<strong>若找不到或找到多个抛异常</strong>。按照参数的类型装配<br>      （查找master中有没有狗杂函数，用于接受dog对象）<br>      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public Master(Dog dog)&#123;</span><br><span class="line">this.dog = dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>(4) autodetect</strong><br>说明 ：  autowire&#x3D;”autodetect”(3)和(2)之间选一个方式。不确定性的处理与(3)和(2)一致。<br><strong>(5) defualt</strong><br>autowire默认是defualt，而defualt-autorwire默认是no<br>这个需要在<beans defualt-autorwire=“指定” /><br>当你在<beans >指定了 default-atuowrite后， 所有的bean的 默认的autowire就是 指定的装配方法;<br>如果没有在<beans defualt-autorwire=“指定” /> 没有  defualt-autorwire&#x3D;“指定” ，则默认是<br>defualt-autorwire&#x3D;”no”</p>
<p><strong>调用xml配置文件</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		ApplicationContext ac=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;com/hsp/autowire/beans.xml&quot;</span>);</span><br><span class="line">		<span class="comment">//获取</span></span><br><span class="line">		Master master=(Master) ac.getBean(<span class="string">&quot;master&quot;</span>);</span><br><span class="line">		System.out.println(master.getName()+<span class="string">&quot; 养 &quot;</span>+master.getDog().getName());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>Master和Dog对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Master</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Master</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Dog dog;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> Dog <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> dog;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.dog = dog;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Dog</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>xml配置文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;master&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hsp.autowire.Master&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>顺平<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置dog对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog111&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;com.hsp.autowire.Dog&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;小黄&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-4-通过注解配置ioc"><a href="#3-4-通过注解配置ioc" class="headerlink" title="3.4 通过注解配置ioc"></a>3.4 通过注解配置ioc</h4><p><strong>配置方式与注解方式区别:</strong><br>    1. 配置， 便于维护(配置过多，比较繁琐)<br>    2. 注解， 开发方便(简化配置，不利于后期维护，如果修改对象创建、关系处理，需要改代码！)<br><strong>3.4.1 将bean注入到ioc中</strong><br><code>@Component</code><br>表示一个组件(类)，把当前组件加入ioc容器加入容器的组件的名称默认是类名第一个字母小写，<br><code>@Component(&quot;classname&quot;)</code>指定加入ioc容器的组件类的类名<br>相当于如下所示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;classname&quot;</span> <span class="attr">class</span>=<span class="string">&quot;...&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">bean</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>以下注解</strong>作用和<code>@Component</code>一样，只是更容易区分组件类型<br><code>@Repository</code>    标识是一个持久层的组件<br><code>@Service</code>       标识是一个业务逻辑层的组件<br><code>@Controller</code>     标识是一个控制层的组件<br><strong>3.4.1 处理bean中的依赖关系</strong><br><code>@Resource</code>   </p>
<ol>
<li>默认根据修饰的字段名称会取ioc容器找对象自动注入找到后注入</li>
<li>如果名称没有找到，再根据类型查找  找到后就立刻注入。如果改类型在ioc容器中有多个对象，报错！</li>
<li>根据类型也没有找到对象，报错！<br><code>@Resource(name =&quot;&quot;)</code> 会根据指定的名称去容器找对象自动注入<br>相当于如下所示<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;classname&quot;</span> <span class="attr">class</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;beanid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>代码示例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Component(&quot;userService&quot;)  // 把当前类加入IOC容器</span></span><br><span class="line"><span class="comment">//@Service(&quot;userService&quot;)  // 把当前类加入IOC容器</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//@Resource(name = &quot;userDao&quot;)   // 根据”userDao“去ioc容器找对象，找到后注入到当前方法参数</span></span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Resource</span>		<span class="comment">// 默认会根据private IUserDao userDao 这里的名称去容器找； 如果没有找到，再根据类型找，再没有找到就报错！</span></span><br><span class="line">	<span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		userDao.save();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/21/215/">Linux查找某个目录下包含某个字段的文件</a>
            </div>
            <p class="sub">Aug 21 2018</p>
            <div class="post-content">
                
                    <h3 id="1-查找当前目录中所有含某一字段的文件（包含文件夹）"><a href="#1-查找当前目录中所有含某一字段的文件（包含文件夹）" class="headerlink" title="1.查找当前目录中所有含某一字段的文件（包含文件夹）"></a>1.查找当前目录中所有含某一字段的文件（包含文件夹）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . | xargs grep &quot;custom&quot;</span><br></pre></td></tr></table></figure>
<h3 id="2-查找当前目录中所有含某一字段的文件（不包含文件夹），只查看文件"><a href="#2-查找当前目录中所有含某一字段的文件（不包含文件夹），只查看文件" class="headerlink" title="2.查找当前目录中所有含某一字段的文件（不包含文件夹），只查看文件"></a>2.查找当前目录中所有含某一字段的文件（不包含文件夹），只查看文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f | xargs grep &quot;custom&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="3-列出文件名，-不需要查看内容呢。grep-提供了-l来只显示文件名称"><a href="#3-列出文件名，-不需要查看内容呢。grep-提供了-l来只显示文件名称" class="headerlink" title="3.列出文件名， 不需要查看内容呢。grep 提供了-l来只显示文件名称"></a>3.列出文件名， 不需要查看内容呢。grep 提供了-l来只显示文件名称</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f | xargs grep &quot;custom&#x27; -l</span><br></pre></td></tr></table></figure>
<p>###4.滤掉某些文件夹，不去这些文件夹下查看呢, 使用-purn。例如不看.git文件下的文件<br>（具体使用方法查看：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u011517841/article/details/53204524">https://blog.csdn.net/u011517841/article/details/53204524</a> ）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -path ./.git -prune -o -type f | xargs grep &quot;custom&quot; -l</span><br></pre></td></tr></table></figure>
<p>###5. 当然查看某个目录下含有某个字段也可以直接使用grep</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r &quot;custom&quot; -l</span><br></pre></td></tr></table></figure>


                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/19/206/">使用Mybatis时，在插入一条数据记录返回主键id值</a>
            </div>
            <p class="sub">Aug 19 2018</p>
            <div class="post-content">
                
                    <p>使用MyBatis往数据库中插入一条记录后，返回该条记录的主键值。</p>
<p><code> useGeneratedKeys=true</code>默认为 false。当设置为 true 时，表示如果插入的表以自增列为主键，则允许 JDBC 支持自动生成主键，并可将自动生成的主键返回。<br><strong>两者最好一起用</strong></p>
<p><code>useGeneratedKeys=true keyProperty=&quot;company_id&quot;</code><br>这个意思就是说。 他在插入后， 会自动把插入的数据生成的ID<br>塞入到你这个 keyProperty 后面设置的 ID 这个参数里面。<br>执行之后 你直接取ID 的值就好了。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">true</span>  <span class="attr">parameterType</span>=<span class="string">&quot;pd&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;company_id&quot;</span>&gt;</span></span><br><span class="line">		insert into trtc_user_company_info(</span><br><span class="line">			···</span><br><span class="line">			id</span><br><span class="line">		) values (</span><br><span class="line">			···</span><br><span class="line">			null <span class="comment">&lt;!-- 填null时数据库默认自增 --&gt;</span></span><br><span class="line">		)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>获取已插入数据库中信息的id</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.put(<span class="string">&quot;COMPANY_ID&quot;</span>, pd.get(<span class="string">&quot;company_id&quot;</span>));</span><br></pre></td></tr></table></figure>


                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/11/192/">order by 多字段排序</a>
            </div>
            <p class="sub">Aug 11 2018</p>
            <div class="post-content">
                
                    <p>####问题</p>
<p>先以<strong>class</strong>字段分组，然后再按照<strong>userscore</strong>排序，如果<strong>userscore</strong>中数值相同 就按照<strong>userid</strong>降序排序<br>###表结构<br><img src="/usr/uploads/2018/08/3072343315.png" data-action="zoom" class="img-rounded img-responsive"><br>
                    <p class="article-more-link">
                        <a href="/2018/08/11/192/">阅读全文</a>
                    </p>
                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/10/188/">Git Branch(分支)</a>
            </div>
            <p class="sub">Aug 10 2018</p>
            <div class="post-content">
                
                    <ol>
<li>查看分支<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure></li>
<li>创建分支<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;branch-name&gt;</span><br></pre></td></tr></table></figure></li>
<li>切换分支<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>
                    <p class="article-more-link">
                        <a href="/2018/08/10/188/">阅读全文</a>
                    </p>
                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/08/179/">PLSQL添加新的链接数据库（DBLINK方式）</a>
            </div>
            <p class="sub">Aug 08 2018</p>
            <div class="post-content">
                
                    <h4 id="其实就是（创建新的DBlink即可）"><a href="#其实就是（创建新的DBlink即可）" class="headerlink" title="其实就是（创建新的DBlink即可）"></a><strong>其实就是（创建新的DBlink即可）</strong></h4><h4 id="1、安装orcale客户端"><a href="#1、安装orcale客户端" class="headerlink" title="1、安装orcale客户端"></a>1、安装orcale客户端</h4><p>这里我安装的是11g版本的<br>下载地址：<br><a target="_blank" rel="noopener" href="http://download.oracle.com/otn/nt/oracle11g/112010/win32_11gR2_client.zip">http://download.oracle.com/otn/nt/oracle11g/112010/win32_11gR2_client.zip</a><br>安装教程：<br><a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/14bd256e6fc34fbb6c26127e.html">https://jingyan.baidu.com/article/14bd256e6fc34fbb6c26127e.html</a></p>
<h4 id="2、添加DBLINK"><a href="#2、添加DBLINK" class="headerlink" title="2、添加DBLINK"></a>2、添加DBLINK</h4><p><strong>按照图片顺序添加即可</strong></p>
                    <p class="article-more-link">
                        <a href="/2018/08/08/179/">阅读全文</a>
                    </p>
                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2018/08/06/178/">Centos7上卸载MariaDB数据库和本地Navicat连接不上虚拟机数据库</a>
            </div>
            <p class="sub">Aug 06 2018</p>
            <div class="post-content">
                
                    <p><img src="https://github.com/1056438464/1056438464.github.io/raw/master/images/1559432142.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">（1）为安全起见，给数据库的root用户设置密码</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# mysql -u root -p  //利用root用户登录数据库</span><br><span class="line"></span><br><span class="line">Enter password:     //新安装的数据库是没有密码的，这里直接按下回车就行</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; set password for &#x27;root&#x27;@&#x27;localhost&#x27; = password(&#x27;123456&#x27;);   </span><br><span class="line"></span><br><span class="line">//为root用户设置的密码是123456，注意：第二个password和左括号之间是不能有空格的。</span><br><span class="line"></span><br><span class="line">（2）为其他主机远程连接数据库开放访问权限，重新登入数据库：</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql;   //选择mysql数据库进行操作</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; select user,password,host from user;  //查看user,password,host这三个字段的权限分配情况</span><br><span class="line"></span><br><span class="line">//通过以上输出可以看出数据库默认只允许用户root在本地服务器（localhost）上登录，不允许其他主机远程连接。</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; grant all privileges on *.* to root@&quot;%&quot; identified by &quot;mycisco.cc&quot;;  </span><br><span class="line"></span><br><span class="line">//上面这条语句将允许用户root使用密码(mycisco.cc)在任何主机上连接该数据库，并赋予该用户所有权限。</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; flush privileges;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">查询所安装的MariaDB组件：</span><br><span class="line"></span><br><span class="line">[root@localhost logs]# rpm -qa | grep Maria*</span><br><span class="line"></span><br><span class="line">卸载数据库：</span><br><span class="line"></span><br><span class="line">[root@localhost~]# yum -y remove mari*</span><br><span class="line"></span><br><span class="line">删除数据库文件：</span><br><span class="line"></span><br><span class="line">[root@localhost~]# rm -rf /var/lib/mysql/*</span><br></pre></td></tr></table></figure>
                
            </div>
        </article>
    
</div>
<div class="side-bar">


    <div class="avator" id="avator">
    <div class="title">
        <a href="#" class="text-underline">About Me</a>
    </div>
        <img src="avator.jpg" class="ava-img">
        <h3 class="author">shang wj</h3>
        <div class="icon-list">
        <a href="yourweibo"><i class="iconfont icon-weibo icon-item"></i></a>
        <a href="mailto:youremail"><i class="iconfont icon-email icon-item"></i></a>
        <a href="yourgithub"><i class="iconfont icon-github icon-item"></i></a>
        <a href="yourlinkedin"><i class="iconfont icon-linkedin icon-item"></i></a>
        </div>
    <div class="tags">
    <h3 class="tags-title">Tags</h3>
    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%83%85/" rel="tag">心情</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/" rel="tag">知识点</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/enable/" rel="tag">enable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/systemctl/" rel="tag">systemctl</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E6%9C%BA/" rel="tag">开机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php-fpm/" rel="tag">php-fpm</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obj/" rel="tag">obj</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/str/" rel="tag">str</a><span class="tag-list-count">1</span></li></ul>
</div>
    </div>
</div>

</section>

    <nav class="page-nav">
    
        <a class="prev" href="/page/14/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text">Prev</span>
        </a>
    
    
        <a class="next" href="/page/16/">
            <span class="next-text">Next</span>
            <i class="iconfont icon-right"></i>
        </a>
    
    </nav>



            </main>
            <div class="copyright">
  <div class="text">Powered By
    <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/zjx137/hexo-theme-Tsu">Tsu</a> &copy 2019
  </div>
</div>

        </div>
    <div class="back-to-top" id="back-to-top">
            <i class="iconfont icon-up"></i>
    </div>
        
    </body>
    
<script src="/js/jquery-3.3.1.min.js"></script>

    
<script src="/js/back-to-top.js"></script>

    
<script src="/js/scroll.js"></script>

    <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": { 
        preferredFont: "TeX", 
        availableFonts: ["STIX","TeX"], 
        linebreaks: { automatic:true }, 
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) 
    },
    tex2jax: { 
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ], 
        processEscapes: true, 
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {  
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, 
        Macros: { href: "{}" } 
    },
    messageStyle: "none"
    }); 
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

</html>
